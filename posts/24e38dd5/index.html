<!DOCTYPE HTML>
<html>
<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://yoursite.com">
    <!--SEO-->



<meta name="robots" content="all" />
<meta name="google" content="all" />
<meta name="googlebot" content="all" />
<meta name="verify" content="all" />
    <!--Title-->


<title>wx-system-微信小程序(视频)案例精讲-电商类：仿京东购物微信小程序（第七集） | Hexo</title>


    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.min.css?rev=3.3.4">
<link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
    <div class="hide">
    	<script src="https://s4.cnzz.com/z_stat.php?id=1263868967&web_id=1263868967" language="JavaScript"></script>
    </div>






    
</head>

<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
  <div class="container-fluid">
    <div class="row">
      <header class="main-header"  style="background-image:url(http://7xpw2b.com1.z0.glb.clouddn.com/hexo-sinppet/img/banner2.jpg)"  >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title="">
            <img src="/img/avatar.jpg" alt="logo头像">
        </a>
        <div class="branding1">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                <h2 style="color:#ddd;letter-spacing:1.5px;"> 不忘积累，记录点滴 by 99 </h2>
            
    	</div>
    </div>
</header>

      <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only">Toggle navigation</span>
                    <i class="fa fa-bars"></i>
                    </span>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation"><a href="/"><i class="fa fa-fw "></i>Home</a>
                            </li>
                        
                            <li role="presentation"><a href="/categories/前端/"><i class="fa fa-fw "></i>前端</a>
                            </li>
                        
                            <li role="presentation"><a href="/categories/后端/"><i class="fa fa-fw "></i>后端</a>
                            </li>
                        
                            <li role="presentation"><a href="/categories/工具/"><i class="fa fa-fw "></i>工具</a>
                            </li>
                        
                            <li role="presentation"><a href="/categories/资源/"><i class="fa fa-fw "></i>资源</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
      <section class="content-wra aa99">
        <div class="row">
          
    <div class="widget" style="padding:0 15px;">
        <div id="search-form" >
            <div id="result-mask" class="hide"></div>
            <div class="search-area">
                
                    <input id="search-key" type="search" autocomplete="off" placeholder="搜点什么呢?" style="width:100%;border-radius:0;">

                
                
            </div>
            <div id="result-wrap" class="hide" style="padding:0 20px;">
                <div id="search-result"></div>
            </div>
            <div class="hide">
                <template id="search-tpl">
                    <div class="item">
                        <a href="/{path}" title="{title}">
                            <div class="title">{title}</div>
                            <div class="content">{content}</div>
                        </a>
                    </div>
                </template>
            </div>
        </div>
    </div>


        </div>
        <div class="row">
            <main class="col-md-9 main-content m-post">
                <p id="process"></p>
<article class="post pp99">
    <div class="post-head">
        <h1 id="wx-system-微信小程序(视频)案例精讲-电商类：仿京东购物微信小程序（第七集）">
            
	            wx-system-微信小程序(视频)案例精讲-电商类：仿京东购物微信小程序（第七集）
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <span>微信小程序</span>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
            微信系统
            
        </span>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-clock-o"></i>
        <span class="date-meta">2018/01/06</span>
    </span>
</div>

            
            
    </div>
    
    <div class="post-body post-content">
        <h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a href="https://chuanke.baidu.com/v9139680-239406-1775747.html" target="_blank" rel="noopener">视频——微信小程序案例精讲-电商类：仿京东购物微信小程序（第七集）</a></p>
<p><a href="http://www.rymooc.com/course/show/518" target="_blank" rel="noopener">微信小程序案例精讲（基础+菜谱精灵+今日头条+爱鲜蜂+淘票票+酷狗音乐+京东购物+拉勾网+猿题库）</a></p>
<p>对于页面布局，先用图片、文字写死，再通过js去改成变量。</p>
<p>好的案例视频要反复看、反复练几遍。</p>
<p>这个课的css命名，从布局到功能都很清晰。</p>
<h1 id="一、需求描述及交互分析"><a href="#一、需求描述及交互分析" class="headerlink" title="一、需求描述及交互分析"></a>一、需求描述及交互分析</h1><p>见课件百度附件。</p>
<h1 id="二、设计思路和相关知识点"><a href="#二、设计思路和相关知识点" class="headerlink" title="二、设计思路和相关知识点"></a>二、设计思路和相关知识点</h1><p>1）tabbar</p>
<p>2）基本组件</p>
<p>3）wx.setStrorageSync，存储数据。</p>
<p>4）wx.getStorageSync，获取数据。</p>
<p>5）wx.navigateTo、wx.navigatoBack，导航跳转。wx.setNavigationBarTitle，新页面标题。</p>
<p>6）swiper</p>
<h1 id="三、搜索商品首界面页面设计"><a href="#三、搜索商品首界面页面设计" class="headerlink" title="三、搜索商品首界面页面设计"></a>三、搜索商品首界面页面设计</h1><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fn3m71byddj306q0bnglp.jpg" width="250"></p>
<h2 id="1、常用css"><a href="#1、常用css" class="headerlink" title="1、常用css"></a>1、常用css</h2><p>1）解决问题：如何一行放两个或三个商品？——<strong>重新整理见《循环一行显示两个商品》</strong></p>
<p>width:47%;（宽度常用百分比）</p>
<p>height:100rpx;（高度常用rpx）</p>
<p>margin:0 auto;（居中，好像比text-align适用范围更广）</p>
<p>2）搜索框的文字上下位置</p>
<p>line-height:80rpx;（用行高能达到padding的效果）</p>
<h1 id="四、搜索商品逻辑设计"><a href="#四、搜索商品逻辑设计" class="headerlink" title="四、搜索商品逻辑设计"></a>四、搜索商品逻辑设计</h1><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fn3mj8kvcfj305e05i3yf.jpg" width="250"></p>
<h2 id="1、常用css-1"><a href="#1、常用css-1" class="headerlink" title="1、常用css"></a>1、常用css</h2><p>1）外边的view常用css</p>
<p>display:flex;</p>
<p>flex-direction:row;</p>
<p>padding:10px;（撑开空白间隙，很好用）</p>
<p>2）推荐热词换行css。推荐设置好右边距、宽度，然后用float。——<strong>重新整理见《循环一行显示两个商品》</strong></p>
<p>margin-right:10px;</p>
<p>padding:1%;（或者padding-left:10px; padding:right:10px;）——如果定义宽度width，字数较多时会跑出来。</p>
<p>float:left;（因为微信有rpx，所以用float也能大小屏幕自适应）</p>
<blockquote>
<p>也可以先设置右边距、宽幅，然后用</p>
<p>  display: flex;</p>
<p>  flex-flow: row wrap;（相当于flex-direction:row; flex-wrap:wrap;）</p>
</blockquote>
<p>3）新的view要清除浮动才会换行，不然会跟着上面的float</p>
<p>clear:both;</p>
<p>4）hr透明度</p>
<p>opacity:50%;</p>
<h2 id="2、逻辑"><a href="#2、逻辑" class="headerlink" title="2、逻辑"></a>2、逻辑</h2><p>1）对输入值，在系统的关键词数组里检索，看哪些是匹配的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">for (var i = 0; i &lt; goods.length; i++) &#123;</span><br><span class="line">  var good = goods[i];</span><br><span class="line">  if (good.indexOf(name) &gt; -1) &#123;</span><br><span class="line">    result.push(good);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>var good = goos[i];</code>，拿到当前系统关键词</p>
<p><code>good.indexOf(name)</code>，<a href="http://www.w3school.com.cn/jsref/jsref_indexOf.asp" target="_blank" rel="noopener">0是关键词匹配，1是不匹配</a>。</p>
<p><code>result.push(good)</code>，如果输入词与系统关键词匹配，把系统关键词加入到result数组最右侧。</p>
<h1 id="五、购物车页面设计"><a href="#五、购物车页面设计" class="headerlink" title="五、购物车页面设计"></a>五、购物车页面设计</h1><p>1）布局元素都会给里外两层，外层定位如flex、margin+定总外形如height，里层定形如width、height。</p>
<h1 id="六、购物车逻辑设计——重点"><a href="#六、购物车逻辑设计——重点" class="headerlink" title="六、购物车逻辑设计——重点"></a>六、购物车逻辑设计——重点</h1><h2 id="1、初始页面时计算总价"><a href="#1、初始页面时计算总价" class="headerlink" title="1、初始页面时计算总价"></a>1、初始页面时计算总价</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">onLoad:function()&#123;</span><br><span class="line">   this.loadGoods();</span><br><span class="line">&#125;,</span><br><span class="line">loadGoods:function()&#123;</span><br><span class="line">  var goods = wx.getStorageSync(&quot;goods&quot;);</span><br><span class="line">  var totalPrice=0;</span><br><span class="line">  for(var i=0;i&lt;goods.length;i++)&#123;</span><br><span class="line">    var good = goods[i];</span><br><span class="line">    totalPrice += good.price * good.count;</span><br><span class="line">  &#125;</span><br><span class="line">  this.setData(&#123;goods: goods, totalPrice: totalPrice&#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>1）拿到产品数组，然后计算总价。</p>
<h2 id="2、单选框checkbox逻辑"><a href="#2、单选框checkbox逻辑" class="headerlink" title="2、单选框checkbox逻辑"></a>2、单选框checkbox逻辑</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">checkboxChange:function(e)&#123;</span><br><span class="line">   var ids = e.detail.value; //ids数组如[0,1,2]</span><br><span class="line">   if(ids.length==0)&#123;</span><br><span class="line">     this.setData(&#123;selectedAll:false,totalPrice:0&#125;);</span><br><span class="line">   &#125;else&#123;</span><br><span class="line">     var goods = wx.getStorageSync(&quot;goods&quot;);</span><br><span class="line">     var totalPrice = 0;</span><br><span class="line">     for (var i = 0; i &lt; goods.length; i++) &#123;</span><br><span class="line">       var good = goods[i];</span><br><span class="line">       for (var j = 0; j &lt; ids.length; j++) &#123;</span><br><span class="line">         if (good.id == ids[j]) &#123;</span><br><span class="line">           totalPrice += good.price * good.count;</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     this.setData(&#123; selectedAll: true, totalPrice: totalPrice &#125;);</span><br><span class="line">   &#125; </span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>1）如果ids数组长度为零。</p>
<p>全选框是false，且总价为零。</p>
<p>2）如果ids数组长度不为零。</p>
<p>拿商品good做循环，对比ids数组看id是否相同，相同则计算该商品价格。通过+=依次循环合计出总价。</p>
<h2 id="3、全选框checkAll逻辑"><a href="#3、全选框checkAll逻辑" class="headerlink" title="3、全选框checkAll逻辑"></a>3、全选框checkAll逻辑</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">checkAll:function(e)&#123;</span><br><span class="line">   var selected = this.data.selected;</span><br><span class="line">   var result = selected==true?false:true; //如果状态为true，点击后变为false。反之变true。</span><br><span class="line">   this.setData(&#123;selected:result&#125;);</span><br><span class="line">   if (result==false)&#123;</span><br><span class="line">      this.setData(&#123;totalPrice:0&#125;);</span><br><span class="line">   &#125;else&#123;</span><br><span class="line">     this.loadGoods();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>1）全不选。</p>
<p>总价0。</p>
<p>2）全选。</p>
<p>重新计算，计算方法同第一步的初始计算总结。</p>
<h2 id="4、加一"><a href="#4、加一" class="headerlink" title="4、加一"></a>4、加一</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">addGoods:function(e)&#123;</span><br><span class="line">  var id = e.currentTarget.id;</span><br><span class="line">  var goods = wx.getStorageSync(&quot;goods&quot;);</span><br><span class="line">  var addGoods = new Array();</span><br><span class="line">  for(var i=0;i&lt;goods.length;i++)&#123;</span><br><span class="line">    var good = goods[i];</span><br><span class="line">    if(good.id == id)&#123;</span><br><span class="line">      good.count = good.count + 1;</span><br><span class="line">    &#125;</span><br><span class="line">    addGoods.push(good);</span><br><span class="line">  &#125;</span><br><span class="line">  wx.setStorageSync(&quot;goods&quot;, addGoods);</span><br><span class="line">  this.loadGoods();</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>1）拿到产品id，如果产品id等于当前点击位置的产品id，则数量count加一/减一</p>
<p>2）替换缓存数组goods，把点击位置的产品push进去</p>
<p>3）按步骤一的方法重新计算总价</p>
<h2 id="5、减一"><a href="#5、减一" class="headerlink" title="5、减一"></a>5、减一</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">minusGoods:function(e)&#123;</span><br><span class="line">  var id = e.currentTarget.id;</span><br><span class="line">  var goods = wx.getStorageSync(&quot;goods&quot;);</span><br><span class="line">  var addGoods = new Array();</span><br><span class="line">  for (var i = 0; i &lt; goods.length; i++) &#123;</span><br><span class="line">    var good = goods[i];</span><br><span class="line">    if (good.id == id) &#123;</span><br><span class="line">      var count = good.count;</span><br><span class="line">      if(count &gt;= 2)&#123;</span><br><span class="line">        good.count = good.count - 1;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    addGoods.push(good);</span><br><span class="line">  &#125;</span><br><span class="line">  wx.setStorageSync(&quot;goods&quot;, addGoods);</span><br><span class="line">  this.loadGoods();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1）跟加一唯一的不同是，多了一个if判断，当产品数量大于2才执行减一。</p>
<h1 id="七、我的订单页面设计"><a href="#七、我的订单页面设计" class="headerlink" title="七、我的订单页面设计"></a>七、我的订单页面设计</h1><h1 id="八、优惠券设计"><a href="#八、优惠券设计" class="headerlink" title="八、优惠券设计"></a>八、优惠券设计</h1><h2 id="1、逻辑"><a href="#1、逻辑" class="headerlink" title="1、逻辑"></a>1、逻辑</h2><p>1）用currentTab来控制点击标签改变颜色，先设定三个标签的currenTab的值分别为0、1、2。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">class=&quot;&#123;&#123;currentTab==0?&apos;select&apos;:&apos;default&apos;&#125;&#125;&quot;</span><br></pre></td></tr></table></figure>
<p>2）点击标签时，触发事件，在js改变currenTab的下标值index，此时currentTab=index实现标签变色。</p>
<p>3）点击时，js也改变优惠券数组，由loadCoupons(0)变成loadCoupons(index)。</p>
<h2 id="2、问题：wxml中的data-current-”0”有什么用？"><a href="#2、问题：wxml中的data-current-”0”有什么用？" class="headerlink" title="2、问题：wxml中的data-current=”0”有什么用？"></a>2、问题：wxml中的data-current=”0”有什么用？</h2><h2 id="3、两种返回数据的方法"><a href="#3、两种返回数据的方法" class="headerlink" title="3、两种返回数据的方法"></a>3、两种返回数据的方法</h2><p>1）this.satData({})</p>
<p>2）result = [];  return result;</p>
<h1 id="【一】套路总结："><a href="#【一】套路总结：" class="headerlink" title="【一】套路总结："></a>【一】套路总结：</h1><p>1、js放置测试初始数据；</p>
<p>2、wxml布局；</p>
<p>3、wxss添加一点样式；</p>
<p>4、js写变化逻辑；——即<strong>『拿数据』</strong></p>
<p>5、把wxss里的测试数据，替换成js里的变量——即<strong>『显示数据』</strong></p>
<blockquote>
<p>其中，第四步，js逻辑即拿数据是核心。而且除了逻辑设计外，还隐藏后端api设计这一步。</p>
<p>所以，有时看起来好像很简单，但是<strong>『后端api设计+前后端数据连接+js逻辑设计』</strong>经常比预想要多花几倍时间。</p>
<p>因此，<strong>css不能纠结</strong>，更多时间应该花在练习刚刚提到的<strong>『』</strong>。</p>
</blockquote>
<ul>
<li>一开始做，担心代码重复很丑，担心css命名不好辨认或重复，担心做某一部分时功能做的不全，一系列担心。但是2018.01.04真正进入状态后，发现根本就没有资格担心这些东西，因为最最重要的事情是把东西做出来，这样才会有干劲。</li>
<li>这篇教程的<strong>『小刚老师』</strong>也是，<strong>『吉米』</strong>也是，<strong>『从0到1的作者』</strong>也是，都是<strong>『先wxml框架、再wxss穿衣服、最后来点js动作』</strong>，也就是说，先把静态页面先做出来，图片、图标全部不考虑变量直接粘贴现成的，把作品做出样子后，就能专注于去改每一部分，吉米做的网站搭建教程就是一个最好的例子，简单的现成静态图片却能搭建出成熟网站的样子。</li>
</ul>
<h1 id="【二】魔改练习法："><a href="#【二】魔改练习法：" class="headerlink" title="【二】魔改练习法："></a>【二】魔改练习法：</h1><ul>
<li>如果看完不做第二天甚至当天就会全部忘记。</li>
<li>如果看完按照教程做会自己为搞懂逻辑，而实际上自己离开这个案例就不会用了。</li>
<li>魔改的好处：<ul>
<li>①、按照教程代码，在自己的作品上立即呈现效果，有成就感；</li>
<li>②、按照教程练习逻辑，理一理思路；</li>
<li>③、根据自己的需求去改，这时才会根据自己的需要去思考怎么修改这个功能，过程中就能看清楚自己真正看懂的是哪部分代码，看不懂的又是哪一部分。</li>
</ul>
</li>
</ul>
<p>#【三】问题</p>
<h2 id="1、数据传递方法"><a href="#1、数据传递方法" class="headerlink" title="1、数据传递方法"></a>1、数据传递方法</h2><p>1）同个js页面，不同function的数组变量传递</p>
<p>最常用的是<code>this.data.xx</code>，传递变量。如果代码结构相同，重新执行function可以用<code>page.function()</code>。</p>
<p>2）<a href="http://www.wxapp-union.com/article-617-1.html" target="_blank" rel="noopener">不同js页面，传递数组、传递散列对象</a></p>
<p>数据页，关键代码<code>JSON.stringify(this.data.testData)</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">data: &#123;  </span><br><span class="line">  testData:&#123;name:&apos;我是name&apos;, extra:&apos;我是extra&apos;&#125;  </span><br><span class="line">&#125;, </span><br><span class="line">next: function(e)&#123;</span><br><span class="line">  wx.navigateTo(&#123;  </span><br><span class="line">    url: &apos;/pages/test/test?extra=&apos;+JSON.stringify(this.data.testData)  </span><br><span class="line">  &#125;) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接收页，关键代码<code>JSON.parse(e.extra)</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">data:&#123;  </span><br><span class="line">  testData: null  </span><br><span class="line">&#125;, </span><br><span class="line">onLoad:function(e)&#123; </span><br><span class="line">  console.log(&quot;接收到的参数是obj=&quot;+e.extra);//此处打印出来的仅仅是字符串 需要解析，解析如下  </span><br><span class="line">  var testData = JSON.parse(e.extra);//解析得到对象</span><br><span class="line">  this.setData(&#123;</span><br><span class="line">    testData: testData</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3）拿到api回调函数返回的数据。（success function等回调函数是不能return返回数据的，可以通过缓存的方法）</p>
<p>在success function里用wx.setstorageSync，在api请求外调用wx.getstorageSync，做一些js算法运算输出新数组。详见luccak项目，p_search的loatTips()、loadTitles()两个加载数据的函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">loadTips:function(e)&#123;</span><br><span class="line">  var that = this;</span><br><span class="line">  var word = [];</span><br><span class="line">  wx.request(&#123;</span><br><span class="line">    url: &apos;https://luccake.top/api/v1/products&apos;,</span><br><span class="line">    header: &#123;</span><br><span class="line">      &apos;content-type&apos;: &apos;application/json&apos; // 默认值</span><br><span class="line">    &#125;,</span><br><span class="line">    success: function (res) &#123;</span><br><span class="line">      wx.setStorageSync(&apos;word&apos;,res.data.data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  var word = wx.getStorageSync(&apos;word&apos;);</span><br><span class="line">  var out = [];</span><br><span class="line">  for(var i=0; i&lt;10; i++)&#123;</span><br><span class="line">    var temp = (Math.random()*word.length)&gt;&gt;0;</span><br><span class="line">    out.push(word[temp]);</span><br><span class="line">  &#125;</span><br><span class="line">  this.setData(&#123;out: out&#125;)</span><br><span class="line">  console.log(&apos;cccfd&apos;,out)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>4）wxml页面拿到js页面的数据，特别是动态改变的数据？</p>
<p>①、实测发现，必须在data里定义变量a，才能在wxml调用。</p>
<p>②、用同步this.setData()，或异步that.setData()，把变量a由初始值改为新值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  data:&#123;</span><br><span class="line">  	dynamic_name: &apos;&apos;, //『重要步骤』data的初始值，可用来给wxml提供初始状态。</span><br><span class="line">  &#125;,</span><br><span class="line">  dynamicInput:function(e)&#123;</span><br><span class="line">  	var name = e.detail.value; //根据具体案例，拿到动态输入的文字</span><br><span class="line">  	var dynamic_name = &apos;&apos; //引入dynamic_name</span><br><span class="line">  	this.setData(&#123;dynamic_name: name&#125;) //『重要步骤』把dynamic_name由初始值改为新值</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>5）wxml传数据如id等给js。</p>
<p>在标签里加上data-id=”“。</p>
<h2 id="2、wx-for循环怎么控制个数"><a href="#2、wx-for循环怎么控制个数" class="headerlink" title="2、wx:for循环怎么控制个数"></a>2、wx:for循环怎么控制个数</h2><p>在wxml用<code>wx:if=&#39;false&#39;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;view wx:for=&quot;&#123;&#123;word&#125;&#125;&quot; wx:if=&apos;&#123;&#123;index&lt;10&#125;&#125;&apos; class=&quot;tip&quot; &gt;</span><br><span class="line">  &#123;&#123;item.title&#125;&#125;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>
<h2 id="3、typeof-检测数据类型"><a href="#3、typeof-检测数据类型" class="headerlink" title="3、typeof()检测数据类型"></a>3、typeof()检测数据类型</h2><p><code>console.log(&#39;类型1&#39;, typeof (utf))</code></p>
<h2 id="4、一般情况下，小程序的utils这个文件夹下，我们可以把本地的数据写进去，封装成-js文件，提供对外暴露的接口，然后读取本地数据，这些在上一篇博客中有详细介绍。我们最后说到写好的本地数据可以另一个页面读取："><a href="#4、一般情况下，小程序的utils这个文件夹下，我们可以把本地的数据写进去，封装成-js文件，提供对外暴露的接口，然后读取本地数据，这些在上一篇博客中有详细介绍。我们最后说到写好的本地数据可以另一个页面读取：" class="headerlink" title="4、一般情况下，小程序的utils这个文件夹下，我们可以把本地的数据写进去，封装成.js文件，提供对外暴露的接口，然后读取本地数据，这些在上一篇博客中有详细介绍。我们最后说到写好的本地数据可以另一个页面读取："></a>4、一般情况下，小程序的utils这个文件夹下，我们可以把本地的数据写进去，封装成.js文件，提供对外暴露的接口，然后读取本地数据，这些在上一篇博客中有详细介绍。我们最后说到写好的本地数据可以另一个页面读取：</h2><h2 id="5、wx-for怎么写在js？js拿api数组？wx-request异步请求不能返回数据，怎么处理？异步接口怎么返回数据给其他函数？"><a href="#5、wx-for怎么写在js？js拿api数组？wx-request异步请求不能返回数据，怎么处理？异步接口怎么返回数据给其他函数？" class="headerlink" title="5、wx:for怎么写在js？js拿api数组？wx.request异步请求不能返回数据，怎么处理？异步接口怎么返回数据给其他函数？"></a>5、wx:for怎么写在js？js拿api数组？wx.request异步请求不能返回数据，怎么处理？异步接口怎么返回数据给其他函数？</h2><ul>
<li><p><a href="http://wxkf.me/archives/2017/1216/181.html" target="_blank" rel="noopener">微信小程序 wx.request(接口调用方式)详解及实例</a>，有require写法。但不能解决当前问题。</p>
</li>
<li><p>好像js里返回api数组不是很容易实现。。</p>
</li>
<li><p>用缓存</p>
<ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view bindtap=&apos;yy&apos;&gt;测试测试&lt;/view&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">tt:function(e)&#123;</span><br><span class="line">  var that = this; //保存this的数据</span><br><span class="line">  wx.request(&#123;</span><br><span class="line">    url: &apos;https://luccake.top/api/v1/products&apos;,</span><br><span class="line">    header: &#123;</span><br><span class="line">      &apos;content-type&apos;: &apos;application/json&apos; // 默认值</span><br><span class="line">    &#125;,</span><br><span class="line">    success: function (res) &#123;</span><br><span class="line">      that.setData(&#123;</span><br><span class="line">        goods: res.data.data,</span><br><span class="line">      &#125;) </span><br><span class="line">      wx.setStorageSync(&apos;e&apos;,res.data.data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line">test:function()&#123;</span><br><span class="line">  this.tt();</span><br><span class="line">  var goods = wx.getStorageSync(&apos;e&apos;);</span><br><span class="line">  console.log(&apos;测试&apos;,goods);</span><br><span class="line">  var qq = goods.title;</span><br><span class="line">  console.log(&apos;qq&apos;,qq)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>把缓存数据，用for循环和setData输出，return返回</p>
<ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view bindtap=&apos;test&apos;&gt;测试测试&lt;/view&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">test:function(e)&#123;</span><br><span class="line">  var that = this; </span><br><span class="line">  wx.request(&#123;</span><br><span class="line">    url: &apos;https://luccake.top/api/v1/products&apos;,</span><br><span class="line">    header: &#123;</span><br><span class="line">      &apos;content-type&apos;: &apos;application/json&apos; </span><br><span class="line">    &#125;,</span><br><span class="line">    success: function (res) &#123;</span><br><span class="line">      that.setData(&#123;</span><br><span class="line">        goods: res.data.data,</span><br><span class="line">      &#125;) </span><br><span class="line">      wx.setStorageSync(&apos;e&apos;,res.data.data)  //最最关键的一步，保存到缓存</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  var goods = wx.getStorageSync(&apos;e&apos;);       //从缓存拿数组</span><br><span class="line">  var titles = [];</span><br><span class="line">  for (var i = 0; i &lt; goods.length; i++) &#123;  //循环api数组拿到titles数组</span><br><span class="line">    var title = goods[i].title;</span><br><span class="line">    titles.push(title);</span><br><span class="line">  &#125;</span><br><span class="line">  this.setData(&#123; titles: titles &#125;)     //保存titles数组</span><br><span class="line">  console.log(&quot;测试&quot;,goods)</span><br><span class="line">  return titles						 //返回titles		</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p>6、<a href="https://www.jianshu.com/p/e92c7495da76" target="_blank" rel="noopener">微信小程序中使用Promise进行异步流程处理</a></p>
<h1 id="【四】魔改"><a href="#【四】魔改" class="headerlink" title="【四】魔改"></a>【四】魔改</h1><h2 id="1、搜索页"><a href="#1、搜索页" class="headerlink" title="1、搜索页"></a>1、搜索页</h2><h3 id="1-1-正在做"><a href="#1-1-正在做" class="headerlink" title="1.1 正在做"></a>1.1 正在做</h3><p>1）把检索关键词的功能先拿开，bindblur=”searchGoods”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">loadGoods: function () &#123;</span><br><span class="line">  var goods = [&apos;奶粉成人&apos;, &apos;奶粉3段&apos;, &apos;奶粉1段&apos;, &apos;奶粉2段&apos;, &apos;奶粉京东自营&apos;, &apos;奶粉4段&apos;, &apos;奶粉盒&apos;, &apos;咖啡机&apos;, &apos;咖啡杯&apos;, &apos;咖啡豆&apos;, &apos;咖啡伴侣&apos;, &apos;咖啡机家用&apos;];</span><br><span class="line">  return goods;</span><br><span class="line">&#125;,</span><br><span class="line">searchGoods: function (e) &#123;</span><br><span class="line">  var name = e.detail.value;</span><br><span class="line">  var goods = this.loadGoods();</span><br><span class="line">  var result = new Array();</span><br><span class="line">  if (name != &apos;&apos;) &#123;</span><br><span class="line">    for (var i = 0; i &lt; goods.length; i++) &#123;</span><br><span class="line">      var good = goods[i];</span><br><span class="line">      if (good.indexOf(name) &gt; -1) &#123;</span><br><span class="line">        result.push(good);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  this.setData(&#123; result: result &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>2）拿掉以前做的wxml搜索框和css。</p>
<p>3）搜索结果想要有返回按钮，所以创建新的pages/p_result。把wxml和css转移过去，并navigateTo跳转。</p>
<p>4）p_search传递cakes数组给p_result？用<code>JSON.stringfy(arr)</code>和<code>JSON.parse(arr)</code>。</p>
<p>5）p_search输入框复制到p_result，并引用js和wxss。</p>
<p>【问题】引用js失败，暂时复制search的js。</p>
<p>6）p_search传数据给p_result，把原来传递数组cakes，改成传递输入名称inputValue。搜索功能直接放在p_result页面做。</p>
<p>7）p_result增加所有、价格、时间排序按钮及功能。</p>
<p>8）想把p_result整合到p_search。包含五个模块：</p>
<p>①、输入框name；②、历史name；③、热词tips④、下拉匹配结果result；⑤、显示商品；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">①一直显示</span><br><span class="line">if 输入为空name=&apos;&apos;</span><br><span class="line">    显示②③</span><br><span class="line">else 输入不为空!name=&apos;&apos;（当①输入name、或②③④改变name）</span><br><span class="line">    显示④</span><br><span class="line">    按回车后，显示⑤</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>！！！不用那么复杂</p>
<blockquote>
<p>1、②③④⑤都是靠wx:for循环显示出来的，如wx:for=”“只要在js页把cakes数组清空，wxml就不会显示。</p>
<p>2、用<code>&lt;block wx:if=&quot;false&quot;&gt;</code>来判断是否显示，其他几个同理。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;block wx:if=&quot;&#123;&#123;result.length &gt; 0&#125;&#125;&quot;&gt;</span><br><span class="line">  &lt;block wx:for=&quot;&#123;&#123;result&#125;&#125;&quot;&gt;</span><br><span class="line">    &lt;view class=&quot;item&quot;&gt;</span><br><span class="line">      &lt;view class=&quot;name&quot; bindtap=&quot;clickTitle&quot; data-title=&quot;&#123;&#123;item&#125;&#125;&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/view&gt;</span><br><span class="line">      &lt;view class=&quot;hr&quot;&gt;&lt;/view&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">  &lt;/block&gt;</span><br><span class="line">&lt;/block&gt;</span><br><span class="line">&lt;block wx:else&gt;</span><br><span class="line">  &lt;block wx:if=&quot;&#123;&#123;cakes != &apos;&apos;&#125;&#125;&quot;&gt;</span><br><span class="line">    &lt;view class=&apos;tab&apos;&gt;</span><br><span class="line">      &lt;view class=&quot;&#123;&#123;currentTab==0?&apos;select&apos;:&apos;default&apos;&#125;&#125;&quot; data-id=&quot;0&quot; bindtap=&apos;switchAll&apos;&gt;所有&lt;/view&gt;</span><br><span class="line">      &lt;view class=&quot;&#123;&#123;currentTab==1?&apos;select&apos;:&apos;default&apos;&#125;&#125;&quot; data-id=&quot;1&quot; bindtap=&apos;switchPrice&apos;&gt;价格&lt;/view&gt;</span><br><span class="line">      &lt;view class=&quot;&#123;&#123;currentTab==2?&apos;select&apos;:&apos;default&apos;&#125;&#125;&quot; data-id=&quot;2&quot; bindtap=&apos;switchTime&apos;&gt;时间&lt;/view&gt;</span><br><span class="line">      &lt;view class=&quot;&#123;&#123;currentTab==3?&apos;select&apos;:&apos;default&apos;&#125;&#125;&quot; data-id=&quot;3&quot; bindtap=&apos;switchTest&apos;&gt;筛选&lt;/view&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">    &lt;view class=&quot;hr&quot;&gt;&lt;/view&gt;</span><br><span class="line">    &lt;scroll-view class=&apos;p_search-body&apos; scroll-y&gt;</span><br><span class="line">      &lt;navigator url=&apos;../p_goods/p_goods&apos; wx:for=&quot;&#123;&#123;cakes&#125;&#125;&quot; wx:key=&quot;&quot;&gt;</span><br><span class="line">        &lt;view class=&apos;p_search-box&apos;&gt;</span><br><span class="line">          &lt;image src=&quot;&#123;&#123;item.photos[0].avatar.url&#125;&#125;&quot;&gt;&lt;/image&gt;</span><br><span class="line">          &lt;view class=&apos;p_search-post&apos;&gt;</span><br><span class="line">            &lt;text class=&apos;title2&apos;&gt;&#123;&#123;item.title&#125;&#125;&lt;/text&gt;</span><br><span class="line">            &lt;text class=&apos;description&apos;&gt;&#123;&#123;item.description&#125;&#125;&lt;/text&gt;</span><br><span class="line">            &lt;text class=&apos;price&apos;&gt;¥ &#123;&#123;item.price&#125;&#125;&lt;/text&gt;</span><br><span class="line">          &lt;/view&gt;</span><br><span class="line">        &lt;/view&gt;</span><br><span class="line">      &lt;/navigator&gt;</span><br><span class="line">    &lt;/scroll-view&gt;</span><br><span class="line">  &lt;/block&gt;</span><br><span class="line">  &lt;block wx:else&gt;</span><br><span class="line">    &lt;view class=&quot;hotSearch&quot;&gt;</span><br><span class="line">      &lt;view class=&quot;title&quot;&gt;</span><br><span class="line">        &lt;view class=&quot;left&quot;&gt;热门搜索&lt;/view&gt;</span><br><span class="line">        &lt;view class=&quot;right&quot;&gt;换一批&lt;/view&gt;</span><br><span class="line">      &lt;/view&gt;</span><br><span class="line">      &lt;view class=&quot;tips&quot;&gt;</span><br><span class="line">        &lt;view wx:for=&quot;&#123;&#123;word&#125;&#125;&quot; bindtap=&apos;clickTip&apos; data-id=&quot;&#123;&#123;item.id&#125;&#125;&quot; data-title=&quot;&#123;&#123;item.title&#125;&#125;&quot;&gt;</span><br><span class="line">          &lt;view wx:if=&apos;&#123;&#123;index&lt;10&#125;&#125;&apos; class=&quot;tip&quot; &gt;</span><br><span class="line">            &#123;&#123;item.title&#125;&#125;</span><br><span class="line">          &lt;/view&gt;</span><br><span class="line">        &lt;/view&gt;</span><br><span class="line">      &lt;/view&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">  &lt;/block&gt;</span><br><span class="line">&lt;/block&gt;</span><br></pre></td></tr></table></figure>
<p>9）p_search排序</p>
<p>10）p_search历史输入name，<strong>数组顺序颠倒用arr.reverse()</strong></p>
<p>11）p_search换一批。</p>
<p><strong>js随机输出数组的方法：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">aaa:function(e)&#123;</span><br><span class="line">  //原数组</span><br><span class="line">  var arr = [0,1,2,3,4,5,6,7,8,9,10,11];</span><br><span class="line">  //输出数组</span><br><span class="line">  var out = [];</span><br><span class="line">  //输出个数</span><br><span class="line">  var num = 5;</span><br><span class="line">  while(out.length &lt; num)&#123;</span><br><span class="line">      var temp = (Math.random()*arr.length) &gt;&gt; 0;</span><br><span class="line">      out.push(temp);</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(&apos;ccc&apos;,out)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>12）p_search按钮-清除输入历史</p>
<p>13）p_search按钮-✘，清除输入框并退回到初始页面</p>
<p>14）p_search边输入文字边匹配词库的bindinput效果。</p>
<p><a href="https://mp.weixin.qq.com/debug/wxadoc/dev/component/input.html" target="_blank" rel="noopener">js如何监听回车键搜索事件？——官方文档bindinput键盘输入时触发事件。以及bindconfirm按下回车键/点击完成按钮触发事件。</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;block wx:if=&quot;&#123;&#123;name == &apos;&apos;&#125;&#125;&quot;&gt;</span><br><span class="line">  &lt;view class=&quot;btn1&quot; bindtap=&quot;resetSearch&quot;&gt;取消&lt;/view&gt;</span><br><span class="line">&lt;/block&gt;</span><br><span class="line">&lt;block wx:else&gt;</span><br><span class="line">  &lt;view class=&quot;btn1 btn2&quot; bindtap=&quot;searchTitle&quot; data-name=&quot;&#123;&#123;name&#125;&#125;&quot;&gt;搜索&lt;/view&gt;</span><br><span class="line">&lt;/block&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.btn2&#123;</span><br><span class="line">  background-color: red;</span><br><span class="line">  border-color: red;</span><br><span class="line">  color: #fff;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>逻辑设计，不要在脑子里空想，越想越乱。</p>
<p>如下，整理出来，再去atom写。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">问题1：不管有没有匹配，都只执行匹配，不执行搜索？</span><br><span class="line">问题2：执行搜索后，只显示匹配结果，不显示搜索结果？</span><br><span class="line"></span><br><span class="line">一、动态输入逻辑，所有条件都不执行搜索。</span><br><span class="line">if name为空</span><br><span class="line">	返回</span><br><span class="line">else name不为空</span><br><span class="line">	计算result数组</span><br><span class="line">	if result为空</span><br><span class="line">		返回</span><br><span class="line">	else result不为空</span><br><span class="line">		显示匹配的关键词，即this.setData(&#123;result:result&#125;)</span><br><span class="line">	end</span><br><span class="line">end</span><br><span class="line">二、搜索逻辑</span><br><span class="line">if name为空</span><br><span class="line">	返回</span><br><span class="line">else name不为空</span><br><span class="line">	保存历史搜索记录</span><br><span class="line">	搜索、并清空热门搜索匹配resutl=&apos;&apos;</span><br><span class="line">	显示推荐商品（不管是否有搜索结果）</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>15）【错误混乱的例子】按钮✘在input有输入时不出现的bug。</p>
<p>用has_input=’’或等于1，来控制按钮是否隐藏。在不同的函数里做相应的setData。</p>
<p>为input输入框绑定bindfocus事件，当光标聚焦时，如果name不为空则显示按钮。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if has_input=&apos;&apos;</span><br><span class="line">	隐藏按钮</span><br><span class="line">else has_input != &apos;&apos;</span><br><span class="line">	显示按钮</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>16）【错误混乱的例子】p_search按钮-取消/搜索，同位置两按钮。</p>
<p>跟步骤15的has_input一样，直接在wxml加上has_input的判断。</p>
<p>17）【错误混乱的例子】按钮-搜索，点击可以搜索。<strong>想通过input框的bindconfirm功能得到搜索结果，但是点击按钮发现没有数据传递怎么办？</strong></p>
<p>在dropdown的函数即bindinput对应的函数里先定义wx.setstorageSync，拿到输入的数据e，然后在input的bindtap事件上引入数据，调用input框的函数。</p>
<p>18）【错误混乱的例子】按钮-取消，点击可以返回搜索的产品页面。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">拿到步骤17中定义的输入值缓存e</span><br><span class="line">在wxml页</span><br><span class="line">if name=&apos;&apos;</span><br><span class="line">	显示按钮</span><br><span class="line">else</span><br><span class="line"></span><br><span class="line">当按下按钮时，</span><br><span class="line">拿到步骤17设置的输入缓存e</span><br><span class="line">if name=&apos;&apos;</span><br><span class="line">	this.setData(&#123;result:&apos;&apos;, cakes:&apos;&apos;&#125;)</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>19）【15-18逻辑重新整理】【问题】三个按钮搞不清楚逻辑，分不清楚哪些逻辑在wxml判断，哪些在js判断。。。。</p>
<p><strong>案例用的主要变量：name输入内容、result匹配输入内容、cakes商品、searchData历史搜索、out热门搜索</strong>。</p>
<p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1fn7d5z5bw7j31400u00v2.jpg" width="550"></p>
<ul>
<li><p>1、在输入框bindinput的函数里，按问题1数据传递4的方法（wxml调用js），设置</p>
<ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  data:&#123;</span><br><span class="line">  	dynamic_name: &apos;&apos;, //『重要步骤』data的初始值，可用来给wxml提供初始状态。</span><br><span class="line">  &#125;,</span><br><span class="line">  dynamicInput:function(e)&#123;</span><br><span class="line"> 	var name = e.detail.value;</span><br><span class="line">    var dynamic_name = name;</span><br><span class="line">    this.setData(&#123;dynamic_name:dynamic_name&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>2、在wxml用dynamic_name是否为空，判断三个按钮的显示</p>
</li>
<li><p>3、搜索按钮、✘按钮，设置成鼠标点击时显示。输入框加入bindfocus=”showIcon”</p>
<ul>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">showIcon:function(e)&#123;</span><br><span class="line">  this.setData(&#123;dynamic_name:1&#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>4、三个按钮js事件，分别设置this.setaData，修改name、result、cakes、searchData、out，这些wxml调用的数据，看是否设置为空。</p>
</li>
</ul>
<p>20）p_search显示商品，切换样式的按钮？（用true_or_false判断，点击按钮，变量值!反转）</p>
<p>显示/隐藏的切换，定义一个变量x，值是true或false来判断。在js里写法<code>this.setData({x: !x})</code></p>
<h2 id="21）循环商品，一行显示两个的css？——我以为我会写了，结果。。而且有两个参考模板在手，就是写不出来（注意检查是否受最外层css如小程序的page或web端的body影响）"><a href="#21）循环商品，一行显示两个的css？——我以为我会写了，结果。。而且有两个参考模板在手，就是写不出来（注意检查是否受最外层css如小程序的page或web端的body影响）" class="headerlink" title="21）循环商品，一行显示两个的css？——我以为我会写了，结果。。而且有两个参考模板在手，就是写不出来（注意检查是否受最外层css如小程序的page或web端的body影响）"></a>21）循环商品，一行显示两个的css？——我以为我会写了，结果。。而且有两个参考模板在手，就是写不出来（注意检查是否受最外层css如小程序的page或web端的body影响）</h2><p>见《循环一行显示两个商品》</p>
<p>22）p_search价格两种排序（用true_or_false判断，点击按钮，变量值!反转）</p>
<p>wxml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class=&quot;&#123;&#123;currentTab==1?&apos;select&apos;:&apos;default&apos;&#125;&#125;&quot; data-id=&quot;1&quot; bindtap=&apos;switchPrice&apos;&gt;价格&lt;/view&gt;</span><br></pre></td></tr></table></figure>
<p>js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">switchPrice:function(e)&#123; </span><br><span class="line">  var price = this.data.price //重要的一步</span><br><span class="line">  this.setData(&#123;price: !price&#125;)</span><br><span class="line">  if(price==true)&#123;</span><br><span class="line">    var aa = &apos;price+asc&amp;q%5Btitle_or_description_cont%5D=&apos;</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">    var aa = &apos;price+desc&amp;q%5Btitle_or_description_cont%5D=&apos;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>23）p_search价格排序对应图标？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class=&quot;&#123;&#123;currentTab==1?&apos;select&apos;:&apos;default&apos;&#125;&#125; price common1&quot; bindtap=&apos;switchPrice&apos;&gt;</span><br><span class="line">  价格</span><br><span class="line">  &lt;view class=&apos;img-pri&apos;&gt;</span><br><span class="line">    &lt;view class=&quot;&#123;&#123;currentTab==1&amp;price==1?&apos;up&apos;:&apos;ping&apos;&#125;&#125; img1&quot;&gt;▲&lt;/view&gt;</span><br><span class="line">    &lt;view class=&quot;&#123;&#123;currentTab==1&amp;price==0?&apos;down&apos;:&apos;ping&apos;&#125;&#125; img2&quot;&gt;▼&lt;/view&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>
<p>说明：class要同时满足currentTab==1&amp;price==1，才会显示up的样式。其中currentTab是触发“价格”两个字的颜色用的js变量，price是在步骤22用来判断价格是升序还是降序的变量。</p>
<p>25）搜索时显示随机商品推荐。要后端做api？还是在js随机？还是在wxml随机？</p>
<p>26）8号welcome首页重做。</p>
<p>27）下拉刷新</p>
<p>app.json全局设置如下。dark的配置是为了下拉时显示三个点。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;window&quot;:&#123;</span><br><span class="line">  &quot;backgroundTextStyle&quot;:&quot;dark&quot;,</span><br><span class="line">  &quot;enablePullDownRefresh&quot;: true</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>index.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onPullDownRefresh: function () &#123;  </span><br><span class="line">  wx.showNavigationBarLoading();// 显示导航栏loading </span><br><span class="line">  this.onLoad();// 调用接口加载数据  </span><br><span class="line">  wx.hideNavigationBarLoading();// 隐藏导航栏loading </span><br><span class="line">  wx.stopPullDownRefresh();// 当处理完数据刷新后，停止当前页面的下拉刷新 </span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>28）上拉加载更多<a href="http://blog.csdn.net/michael_ouyang/article/details/56846185" target="_blank" rel="noopener">http://blog.csdn.net/michael_ouyang/article/details/56846185</a></p>
<p><a href="http://www.mntuku.cn/index.php/article/show/id-7581" target="_blank" rel="noopener">http://www.mntuku.cn/index.php/article/show/id-7581</a></p>
<p>第五点：下拉的逻辑，将页数设置为一，并清空msgList 内容，定位距顶部0px，最后调用加载数据的方法。<br>第六点：上滑的逻辑，直接调用。因为定位点在scorll方法中已经赋值。</p>
<p>29）修改标题在json文件增加<code>&quot;navigationBarTitleText&quot;: &quot;商品详情&quot;,</code></p>
<p>【问题】js模块化，that.setData或this.setData会报错，而且测试发现this是模块化页面的this。</p>
<p>30）9号完成详情页css。</p>
<p>item.avatar.medium.url</p>
<p>按钮置底导航置底<a href="http://www.wxapp-union.com/article-1029-1.html" target="_blank" rel="noopener">http://www.wxapp-union.com/article-1029-1.html</a></p>
<p>① 、添加按钮</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;button bindtap=&quot;add&quot; type=&quot;primary&quot; class=&quot;address-add&quot;&gt;添加&lt;/button&gt;</span><br><span class="line">/*添加地址按钮*/</span><br><span class="line">.product-btn &#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    bottom: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>②、给按钮上边的版块加marginbottom</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.product-detail &#123;</span><br><span class="line">    margin-bottom: 46px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>31）▲▲▲-★随机商品api</p>
<p>先在model定义随机的scope</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scope :random8, -&gt; &#123; limit(8).order(&quot;RANDOM()&quot;) &#125;</span><br></pre></td></tr></table></figure>
<p>然后在controller调用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@suggests = Product.random8</span><br></pre></td></tr></table></figure>
<p><strong>！！服务器报错</strong>——暂时没有解决，先用products的api</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Completed 500 Internal Server Error in 21ms (ActiveRecord: 1.8ms)</span><br><span class="line"></span><br><span class="line">ActionView::Template::Error (Mysql2::Error: FUNCTION rails_recipes.RANDOM does not exist: SELECT  `products`.* FROM `products` ORDER BY RANDOM() LIMIT 8):</span><br></pre></td></tr></table></figure>
<p>32）搜索没有结果显示提示图标。7小时</p>
<p>逻辑：所有的显示/隐藏基本都是同理，在wxml设置条件某位为0或1，然后在js定义。</p>
<blockquote>
<p>这里有点绕，多梳理几次。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">当没有搜索结果时，即cakes==[]</span><br><span class="line">  给一个参数cakes_data，值是0或1。在wxml当值为1时显示图标。</span><br><span class="line">  在js的searchTitle的函数里，获取cakes的同时设置cakes_data为1（意思是有搜索就会显示icon，同时受限于上边给的条件cakes==[]，所以只会在搜索且搜索结果为[]时显示）。</span><br></pre></td></tr></table></figure>
<p>32）▲▲▲-★搜索推荐商品、详情页最后推荐商品</p>
<p>一开始以为如果搜索为空，用js循环为空，所以最好接api。</p>
<p>更好的办法，用products的api在js随机。</p>
<p>①、js定义random_8函数（同loadTips函数）</p>
<p>②、在搜索函数searchTitle加入</p>
<p>③、wxml显示</p>
<p>33）▲▲▲-★★首页、详情页各种按钮接入跳转链接</p>
<p>34）▲▲-★★资讯页面</p>
<p>35）▲-★★名片页的设计，参考潘鹏作品浮起的css、二维码、电话、地址</p>
<p>35）▲-★★★加入购物车的逻辑<a href="http://blog.csdn.net/michael_ouyang/article/details/70755892" target="_blank" rel="noopener">http://blog.csdn.net/michael_ouyang/article/details/70755892</a></p>
<p>36）▲-★★★上拉加载更多，一种是在api做好分页（分页能做但是小程序不知道怎么做），一种是按论坛教程做</p>
<p>37）▲-★★★收藏功能</p>
<p>其他1）整理手机图片等</p>
<p>其他2）整理小程序功能</p>
<p>其他3）整理浏览器收藏</p>
<h3 id="1-2-待优化"><a href="#1-2-待优化" class="headerlink" title="1.2 待优化"></a>1.2 待优化</h3><p>1）p_search页。搜索框用的search的js，和tips热门词最后用的search几乎相同，怎么写可以合并成一个。</p>
<p>2）p_result页。也是复制search function，去掉其中的navigateTo。</p>
<p>3）历史输入searchData的缓存，在四个function写入同样的代码。clickTip()、clickTitle()、searchTitle()、clickSearchData()。</p>
<h2 id="整理教程跟着它分类http-blog-csdn-net-michael-ouyang-article-details-55215104"><a href="#整理教程跟着它分类http-blog-csdn-net-michael-ouyang-article-details-55215104" class="headerlink" title="整理教程跟着它分类http://blog.csdn.net/michael_ouyang/article/details/55215104"></a>整理教程跟着它分类<a href="http://blog.csdn.net/michael_ouyang/article/details/55215104" target="_blank" rel="noopener">http://blog.csdn.net/michael_ouyang/article/details/55215104</a></h2><p>深圳市酷米仕科技有限公司</p>
<p>shenzhenshikumishikejiyouxiangongsi</p>
<p>搜索可能一开始就不要用然ransack来做，因为ransack即便实现了导入表格会自动搜索填表的功能，但是换个gem又要重新做。当然如果好实现的话，了解一下原理也是可以的。</p>
<p>1）▲▲▲-★用百宝箱专案测试导出表格；</p>
<p>2）▲▲▲-★用百宝箱专案测试导入表格；</p>
<p>3）找鸿亮、李安、韵儿爸爸、nic、ihower、ruby china了解功能思路</p>
<p>4）10号，csv怎么用excel查看/编辑/保存。</p>
<p>①、完成csv、excel数据导出。</p>
<p>②、完成csv数据导入。</p>
<p>③、武城做cdv导入的model时<strong>导入数据没办法预览（可能要拿教程从头做一遍）</strong>另外看nic直播，by_bug断点测试。</p>
<p>④、测试自己做的csv档能不能导入。</p>
<p>⑤、搜索ransack接入。</p>
<p>62.0.3232.84</p>
<p>下载学习中心</p>
<p>李安结构云</p>

    </div>

    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">by 99</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/posts/f342d2d/" class="pre-post btn btn-default"><i class="fa fa-angle-left fa-fw"></i>上一篇</a>
    
    
        <a href="/posts/74ddd2a3/" class="next-post btn btn-default">下一篇<i class="fa fa-angle-right fa-fw"></i></a>
    
</div>


    <div id="comments">
        
	
<div id="lv-container" data-id="city" data-uid="MTAyMC8zMzE1My85NzEx">
  <script type="text/javascript">
     (function(d, s) {
         var j, e = d.getElementsByTagName(s)[0];
         if (typeof LivereTower === 'function') { return; }
         j = d.createElement(s);
         j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
         j.async = true;
         e.parentNode.insertBefore(j, e);
     })(document, 'script');
  </script>
</div>


    </div>


            </main>
            
    <aside class="col-md-3 sidebar">
        
        <!-- 
    <div class="widget">
        <h3 class="title">Search</h3>
        <div id="search-form">
            <div id="result-mask" class="hide"></div>
            <div class="search-area">
                
                    <input id="search-key" type="search" autocomplete="off" placeholder="搜点什么呢?">
                    <button type="button" class="search-form-submit" id="search-local">搜索</button>
                
                
            </div>
            <div id="result-wrap" class="hide">
                <div id="search-result"></div>
            </div>
            <div class="hide">
                <template id="search-tpl">
                    <div class="item">
                        <a href="/{path}" title="{title}">
                            <div class="title">{title}</div>
                            <div class="content">{content}</div>
                        </a>
                    </div>
                </template>
            </div>
        </div>
    </div>
 -->

        
        
    <div class="widget notification">
        <h3 class="title">网站公告</h3>
        <div>
            <p>你好，我是99。<br/>欢迎来到我的博客。<br/>
<br/>
<hr/>接受贡献，包括不限于提交问题与需求，修复代码。欢迎Pull Request<br/>支持主题：<a href="https://github.com/shenliyang/hexo-theme-snippet/stargazers">Star一下</a>
</p>
        </div>
    </div>

        
        
    <div class="widget">
      <h3 class="title">Social</h3> 
        <div class="content social">
            
	            <a href="//github.com/shenliyang" rel="external nofollow" title="Github" target="_blank">
			    	<i class="git fa fa-git"></i>
			    </a>
            
	            <a href="mailto:snippet@91h5.cc" rel="external nofollow" title="邮箱" target="_blank">
			    	<i class="envelope-o fa fa-envelope-o"></i>
			    </a>
            
	            <a href="/" rel="external nofollow" title="联系QQ" target="_blank">
			    	<i class="qq fa fa-qq"></i>
			    </a>
            
	            <a href="/" rel="external nofollow" title="微博" target="_blank">
			    	<i class="weibo fa fa-weibo"></i>
			    </a>
            
	            <a href="/" rel="external nofollow" title="QQ群" target="_blank">
			    	<i class="users fa fa-users"></i>
			    </a>
            
	            <a href="/atom.xml" rel="external nofollow" title="RSS" target="_blank">
			    	<i class="feed fa fa-feed"></i>
			    </a>
            
        </div>
    </div>


        
        
    <div class="widget">
        <h3 class="title">Categories</h3>
        <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ror功能/"><i class="fa" aria-hidden="true">ror功能</i></a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ror知识点/"><i class="fa" aria-hidden="true">ror知识点</i></a><span class="category-list-count">24</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ror系统/"><i class="fa" aria-hidden="true">ror系统</i></a><span class="category-list-count">19</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/web页面/"><i class="fa" aria-hidden="true">web页面</i></a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link current" href="/categories/工具/"><i class="fa" aria-hidden="true">工具</i></a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/微信小程序/"><i class="fa" aria-hidden="true">微信小程序</i></a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/心得/"><i class="fa" aria-hidden="true">心得</i></a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/投资/"><i class="fa" aria-hidden="true">投资</i></a><span class="category-list-count">1</span></li></ul>
    </div>


        
        
    <div class="widget">
      <h3 class="title">Archives</h3>
        <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/"><i class="fa" aria-hidden="true">November 2018</i></a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/"><i class="fa" aria-hidden="true">January 2018</i></a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/"><i class="fa" aria-hidden="true">December 2017</i></a><span class="archive-list-count">34</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/"><i class="fa" aria-hidden="true">November 2017</i></a><span class="archive-list-count">35</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/"><i class="fa" aria-hidden="true">September 2017</i></a><span class="archive-list-count">1</span></li></ul>
    </div>


        
        
  <div class="widget">
    <h3 class="title">Tag Cloud</h3>
    <div class="content tag-cloud">
        <a href="/tags/atom/" style="font-size: 14px;">atom</a> <a href="/tags/bug/" style="font-size: 18px;">bug</a> <a href="/tags/heroku/" style="font-size: 10px;">heroku</a> <a href="/tags/hexo/" style="font-size: 12px;">hexo</a> <a href="/tags/interview/" style="font-size: 11px;">interview</a> <a href="/tags/mac/" style="font-size: 12px;">mac</a> <a href="/tags/orid-day/" style="font-size: 10px;">orid-day</a> <a href="/tags/orid-month/" style="font-size: 11px;">orid-month</a> <a href="/tags/ror功能/" style="font-size: 12px;">ror功能</a> <a href="/tags/ror知识点/" style="font-size: 17px;">ror知识点</a> <a href="/tags/ror系统/" style="font-size: 19px;">ror系统</a> <a href="/tags/typora/" style="font-size: 10px;">typora</a> <a href="/tags/vps/" style="font-size: 16px;">vps</a> <a href="/tags/web页面/" style="font-size: 12px;">web页面</a> <a href="/tags/下载/" style="font-size: 10px;">下载</a> <a href="/tags/工具/" style="font-size: 20px;">工具</a> <a href="/tags/常用/" style="font-size: 13px;">常用</a> <a href="/tags/微信功能/" style="font-size: 13px;">微信功能</a> <a href="/tags/微信系统/" style="font-size: 15px;">微信系统</a> <a href="/tags/微信页面/" style="font-size: 11px;">微信页面</a> <a href="/tags/心得/" style="font-size: 14px;">心得</a> <a href="/tags/手机/" style="font-size: 10px;">手机</a> <a href="/tags/投资/" style="font-size: 10px;">投资</a> <a href="/tags/搬砖/" style="font-size: 10px;">搬砖</a> <a href="/tags/科学上网/" style="font-size: 14px;">科学上网</a> <a href="/tags/部署/" style="font-size: 13px;">部署</a>
    </div>
  </div>


        
        
    <div class="widget">
        <h3 class="title">Friends</h3>
        <div class="content friends-link">
        
            <a href="http://www.shenliyang.com" class="fa" target="_blank">个人博客</a>
        
        </div>
    </div>


        
    </aside>


        </div>
      </section>
    </div>
  </div>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <span>Copyright &copy; 2018
                </span> |
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> |
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
            </div>
        </div>
    </div>
</div>



	<script src="/js/search.js?rev=@@hash"></script>


<script src="/js/app.js?rev=@@hash"></script>


</body>
</html>
