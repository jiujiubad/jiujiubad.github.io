{"meta":{"title":"Hexo","subtitle":null,"description":null,"author":"John Doe","url":"http://yoursite.com"},"pages":[],"posts":[{"title":"bug-缺少id，model关系没设置，create的action没指明model关系","slug":"bug-缺少id，model关系没设置，create的action没指明model关系","date":"2017-12-01T04:00:00.000Z","updated":"2018-01-14T01:47:41.000Z","comments":true,"path":"posts/523a3588/","link":"","permalink":"http://yoursite.com/posts/523a3588/","excerpt":"","text":"第一种：No route matches {:action=&gt;”show”, :controller=&gt;”orders”, :id=&gt;nil} missing required keys: [:id]123456789101112131415161718ActionController::UrlGenerationError in Account::Orders#indexShowing /Users/apple/rails/jdstore1130/app/views/account/orders/index.html.erb where line #13 raised:No route matches &#123;:action=&gt;&quot;show&quot;, :controller=&gt;&quot;orders&quot;, :id=&gt;nil&#125; missing required keys: [:id]Extracted source (around line #13):111213141516 &lt;% @orders.each do |order| %&gt; &lt;tr&gt; &lt;td&gt;&lt;%= link_to(order.id, order_path(order.token)) %&gt;&lt;/td&gt; &lt;td&gt;&lt;%= order.created_at %&gt;&lt;/td&gt; &lt;/tr&gt; &lt;% end %&gt; 第二种：undefined method1234567891011121314151617NoMethodError in OrdersController#showundefined method `product_lists&apos; for nil:NilClassExtracted source (around line #5):345678 def show @order = Order.find_by_token(params[:id]) @product_lists = @order.product_lists end def create 解决办法：1、检查model里的关系设置 2、检查create的action有没有指明外键（即model中有设置belongs_to :xx）相关的关系（如@productj.user = current_user） 3、检查html的输入参数，是要用常用参数(@xx)，还是用id参数(@xx.yy_id) 4、如果有新增栏位，尝试清空该栏位的空的值。比如进入rails c，输入Order.where(token: nil).destroy_all","categories":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}],"tags":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/tags/bug/"}],"keywords":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}]},{"title":"bug-购物网6-1第四题 undefined method `update' for nil/NilClass","slug":"bug-购物网6-1第四题 undefined method `update' for nil:NilClass","date":"2017-11-30T01:15:00.000Z","updated":"2018-01-14T01:47:19.000Z","comments":true,"path":"posts/b36ae94d/","link":"","permalink":"http://yoursite.com/posts/b36ae94d/","excerpt":"","text":"12345678910NoMethodError in CartItemsController#updateundefined method `update&apos; for nil:NilClassExtracted source (around line #6): @cart = current_cart @cart_item = @cart.cart_items.find_by(product_id: params[:id]) @cart_item.update(cart_item_params) redirect_to :back end 分析：因为这里不是show/new/edit页面，而是/carts页面，购物车里有很多个cart_item，所以系统不知道我们要删除哪一个。看变量名都知道，这里是cart_items而不是类变量单数@cart_item——因此，在simple_form_for里要加入url，指明要删除的cart_item，这个url是表单要提交到的url地址，可以用show的url。解答：加入url: cart_item_path(cart_item.product_id)1234&lt;%= simple_form_for cart_item, url: cart_item_path(cart_item.product_id) do |f| %&gt; &lt;%= f.select :quantity, 1..cart_item.product.quantity %&gt; &lt;%= f.submit &quot;更新&quot;, data:&#123;disable_with:&quot;正在更新..&quot;&#125; %&gt; &lt;% end %&gt;","categories":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}],"tags":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/tags/bug/"}],"keywords":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}]},{"title":"bug-购物网5-3 NameError/ uninitialized constant Product//ImageUploader","slug":"bug-购物网5-3 NameError: uninitialized constant Product::ImageUploader","date":"2017-11-29T20:30:00.000Z","updated":"2018-01-14T01:47:12.000Z","comments":true,"path":"posts/3abd616e/","link":"","permalink":"http://yoursite.com/posts/3abd616e/","excerpt":"","text":"NameError: uninitialized constant Product::ImageUploader错误：执行rails c，输入Product.last报错1234567891011121314151617181920 apple@apple ⮀ ~/rails/jdstore1130 ⮀ ⭠ test± ⮀ rails cRunning via Spring preloader in process 6299Loading development environment (Rails 5.0.6)2.3.1 :001 &gt; Product.lastNameError: uninitialized constant Product::ImageUploader from /Users/apple/rails/jdstore1130/app/models/product.rb:4:in `&lt;class:Product&gt;&apos; from /Users/apple/rails/jdstore1130/app/models/product.rb:1:in `&lt;top (required)&gt;&apos; from /Users/apple/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.6/lib/active_support/dependencies/interlock.rb:12:in `block in loading&apos; from /Users/apple/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.6/lib/active_support/concurrency/share_lock.rb:150:in `exclusive&apos; from /Users/apple/.rvm/gems/ruby-2.3.1/gems/activesupport-5.0.6/lib/active_support/dependencies/interlock.rb:11:in `loading&apos; from (irb):1 from /Users/apple/.rvm/gems/ruby-2.3.1/gems/railties-5.0.6/lib/rails/commands/console.rb:65:in `start&apos; from /Users/apple/.rvm/gems/ruby-2.3.1/gems/railties-5.0.6/lib/rails/commands/console_helper.rb:9:in `start&apos; from /Users/apple/.rvm/gems/ruby-2.3.1/gems/railties-5.0.6/lib/rails/commands/commands_tasks.rb:78:in `console&apos; from /Users/apple/.rvm/gems/ruby-2.3.1/gems/railties-5.0.6/lib/rails/commands/commands_tasks.rb:49:in `run_command!&apos; from /Users/apple/.rvm/gems/ruby-2.3.1/gems/railties-5.0.6/lib/rails/commands.rb:18:in `&lt;top (required)&gt;&apos; from /Users/apple/rails/jdstore1130/bin/rails:9:in `&lt;top (required)&gt;&apos; from /Users/apple/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require&apos; from /Users/apple/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require&apos; from -e:1:in `&lt;main&gt;&apos; 解决办法：因为CarrierWave在ORM (ActiveRecord)之前加载了，解决的方案是在environment.rb中加入require &#39;carrierwave/orm/activerecord&#39;重启下server后错误消失。","categories":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}],"tags":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/tags/bug/"}],"keywords":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}]},{"title":"bug-购物网4-4 nil is not a valid asset source","slug":"bug-购物网4-4 nil is not a valid asset source","date":"2017-11-29T18:40:00.000Z","updated":"2018-01-14T01:47:03.000Z","comments":true,"path":"posts/de723084/","link":"","permalink":"http://yoursite.com/posts/de723084/","excerpt":"","text":"原因：12345&lt;% if @product.image.present? %&gt; &lt;%= image_tag(@product.image.thumb.url, class:&quot;thumbnail&quot;) %&gt; &lt;% else %&gt; &lt;%= image_tag(&quot;http://placehold.it/200x200&amp;text=No Pic&quot;, class:&quot;thumbnail&quot;) %&gt; &lt;% end %&gt; admin后台设置了以上代码，如果新建商品没有上传图片，返回products的index页面时就会报错，因为它的代码如下： 12345&lt;% @products.each do |product| %&gt; &lt;%= link_to product_path(product) do %&gt; &lt;%= image_tag(product.image.thumb.url, class:&quot;thumbnail&quot;) %&gt; &lt;% end %&gt;&lt;% end %&gt; 这里是直接拿@products做循环，遇到image的值为nil时就会报错。 解决办法：在products的index也加上这段代码12345&lt;% if @product.image.present? %&gt; &lt;%= image_tag(@product.image.thumb.url, class:&quot;thumbnail&quot;) %&gt; &lt;% else %&gt; &lt;%= image_tag(&quot;http://placehold.it/200x200&amp;text=No Pic&quot;, class:&quot;thumbnail&quot;) %&gt; &lt;% end %&gt;","categories":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}],"tags":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/tags/bug/"}],"keywords":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}]},{"title":"bug-购物网大类 No route matches {/action=>\"index\", /controller=>\"admin/resumes\"} missing required keys/ [/job_id]","slug":"bug-购物网大类 No route matches {:action=>\"index\", :controller=>\"admin:resumes\"} missing required keys: [:job_id]","date":"2017-11-28T20:20:00.000Z","updated":"2018-01-14T01:47:34.000Z","comments":true,"path":"posts/3e73ee3b/","link":"","permalink":"http://yoursite.com/posts/3e73ee3b/","excerpt":"","text":"ActionController::UrlGenerationError in Admin::Jobs#indexShowing /Users/apple/rails/job-listing1129/app/views/admin/jobs/index.html.erb where line #22 raised: No route matches {:action=&gt;”index”, :controller=&gt;”admin/resumes”} missing required keys: [:job_id] Extracted source (around line #22): 202122232425 &lt;%= link_to(job.title, admin_job_path(job)) %&gt; &lt;/td&gt; &lt;td&gt;&lt;%= link_to(job.resumes.count, admin_job_resumes_path) %&gt;&lt;/td&gt; &lt;td&gt;&lt;%= job.wage_lower %&gt;&lt;/td&gt; &lt;td&gt;&lt;%= job.wage_upper %&gt;&lt;/td&gt; &lt;td&gt;&lt;%= job.contact %&gt;&lt;/td&gt; Rails.root: /Users/apple/rails/job-listing1129 原因：1、model里没有做关联2、model关联后，所有外键（比如简历resume里有user_id、job_id）要在controlller的create的action里给一个表达式，指明这份简历具体属于哪一个用户、具体属于哪一个职位的。比如12345def create @job = Job.find(params[:job_id]) @resume.job = @job @resume.user = current_userend 3、views的路径没有给参数，比如admin_job_resumes_path(@job)里的@job","categories":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}],"tags":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/tags/bug/"}],"keywords":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}]},{"title":"bug-招聘网10-3 按薪资下限排序不生效","slug":"bug-招聘网10-3 按薪资下限排序不生效","date":"2017-11-24T01:00:00.000Z","updated":"2018-01-14T01:47:56.000Z","comments":true,"path":"posts/d7488f13/","link":"","permalink":"http://yoursite.com/posts/d7488f13/","excerpt":"","text":"解法：不按教材的代码走，薪资上限wage_upper_bound栏位按降序排列即DESC，薪资下限wage_lower_bound ASC按升序排列即ASC。搞定！ 12345678910def index @jobs = case params[:order] when &apos;by_lower_bound&apos; Job.where(is_hidden: false).order(&apos;wage_lower_bound ASC&apos;) when &apos;by_upper_bound&apos; Job.where(is_hidden: false).order(&apos;wage_upper_bound DESC&apos;) else Job.where(is_hidden: false).recent endend","categories":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}],"tags":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/tags/bug/"}],"keywords":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}]},{"title":"bug-购物网8-1 按生成订单按钮网址转到orders但页面不跳转（代码跟课程的一样）","slug":"bug-购物网8-1 按生成订单按钮网址转到orders但页面不跳转（代码跟课程的一样）","date":"2017-11-23T04:10:00.000Z","updated":"2018-01-14T01:47:27.000Z","comments":true,"path":"posts/ef2eddfe/","link":"","permalink":"http://yoursite.com/posts/ef2eddfe/","excerpt":"","text":"检查代码跟课程一样，按生成订单按钮网址转到orders但页面不跳转。 ——重新按教程贴一遍，没有发现差异，但是bug不见了。。","categories":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}],"tags":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/tags/bug/"}],"keywords":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}]},{"title":"bug-购物车8-1 checkout页面一刷新，就出了报错，显示：“The Action 'show' could not be found for CartsController\"","slug":"bug-购物车8-1 checkout页面一刷新，就出了报错，显示：“The Action 'show' could not be found for CartsController\"","date":"2017-11-23T02:15:00.000Z","updated":"2018-01-14T01:46:38.000Z","comments":true,"path":"posts/3d6294/","link":"","permalink":"http://yoursite.com/posts/3d6294/","excerpt":"","text":"问题：checkout页面一刷新就出了报错，显示：“The Action ‘show’ could not be found for CartsController”。且只在chrome存在，在safari试验时正常，会跳出一个弹窗询问“是否要重新发送表单”。助教的解答：助教有这么几种看法：1. checkout定义的是post的路径，所以第一次进去的时候是可以的。第二次刷新过后，浏览器变成了get的请求，get请求会自动去找show action，所以会报错。查看sever log，用chrome测试发现刷新后请求编程get，用safari测试刷新了还是post。2、chrome清楚缓存和cookie还是不行。3、又下载了QQ浏览器发现没有这个问题。 ——可能是浏览器问题，先跳过","categories":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}],"tags":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/tags/bug/"}],"keywords":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}]},{"title":"bug-购物网4-3 localhost 将您重定向的次数过多","slug":"bug-购物网4-3 localhost 将您重定向的次数过多","date":"2017-11-23T00:10:00.000Z","updated":"2018-01-14T01:46:47.000Z","comments":true,"path":"posts/936990c3/","link":"","permalink":"http://yoursite.com/posts/936990c3/","excerpt":"","text":"删除cookie没用，删除redirect_to root_path有效123456def admin_required if !current_user.admin? redirect_to root_path flash[:alert] = &quot;请用管理员账号登录&quot; endend 代码里的redirect_to root_path，和路由里的root &quot;admin/products#index&quot;冲突，导致网页无限循环重定向。解决办法：修改主页如root &quot;welcome#index&quot;","categories":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}],"tags":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/tags/bug/"}],"keywords":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}]},{"title":"bug-购物网4-4 carrierwave上传图片translation missing- en.errors.messages.mini_magick_processing_error","slug":"bug-购物网4-4 carrierwave上传图片translation missing- en.errors.messages.mini_magick_processing_error","date":"2017-11-21T17:10:00.000Z","updated":"2018-01-14T01:46:55.000Z","comments":true,"path":"posts/5082df0b/","link":"","permalink":"http://yoursite.com/posts/5082df0b/","excerpt":"","text":"JDSTORE4-3，carrierwave和minimagic设置后，上传图片报错 translation missing: en.errors.messages.mini_magick_processing_error 一、新的解法输入brew install imagemagick，会提示gem已安装是否要更新。 输入brew upgrade imagemagick，更新完成，然后bundle搞定。 二、旧的解法（仍有bug）原因：网上goolge，有的是说初始化问题，可以尝试重装。但是自己重新无效临时解决办法：在config/initializers下新建一个文件carrierwave.rb，然后写入代码，最后重开rails s123456CarrierWave.configure do |config| config.storage = :file config.enable_processing = false config.fog_attributes = &#123;&apos;Cache-Control&apos;=&gt;&apos;max-age=315576000&apos;&#125; config.cache_dir = Rails.root.join(&apos;tmp&apos;, &apos;uploads&apos;) end 新问题：上传的图片是原始大小","categories":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}],"tags":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/tags/bug/"}],"keywords":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}]},{"title":"bug-亚马逊awe_ec2 Swap file \"/etc/shadowsocks/.config.json.swp\" already exists! [O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (Q","slug":"bug-亚马逊awe_ec2 Swap file \":etc:shadowsocks:.config.json.swp\" already exists! [O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (Q","date":"2017-11-14T03:00:00.000Z","updated":"2018-01-14T01:47:47.000Z","comments":true,"path":"posts/723a2ffb/","link":"","permalink":"http://yoursite.com/posts/723a2ffb/","excerpt":"","text":"亚马逊的AWS不能SSH登录了怎么办？ 【bug】Swap file “/etc/shadowsocks/.config.json.swp” already exists! [O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (QLinux下编程难免会开启多次vim编辑， 同一个文件如果在上一次编辑时未进行保存，则在下一次想要进行编辑时就会出现： swap file “*.swp” already exists! [O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (Q)uit, (A)bort: 原因： 使用vim编辑文件实际是先copy一份临时文件并映射到内存给你编辑， 编辑的是临时文件， 当执行：w后才保存临时文件到原文件，执行：q后才删除临时文件。 每次启动编辑时都会检索这个文件是否已经存在临时文件， 有则询问如何处理，就会出现如上情景。 解决方法（删除这个临时文件即可）： rm *.swp linux用VI编辑后保存退出命令是什么啊？按esc，再按住shift再按两下’z‘键。","categories":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}],"tags":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/tags/bug/"}],"keywords":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}]},{"title":"bug-自动化测试1-3  gem_rspec-rails报错nomethoderror/ undefined method 'this' for","slug":"bug-自动化测试1-3  gem_rspec-rails报错nomethoderror: undefined method 'this' for","date":"2017-11-05T01:00:00.000Z","updated":"2018-01-14T01:48:03.000Z","comments":true,"path":"posts/9178391d/","link":"","permalink":"http://yoursite.com/posts/9178391d/","excerpt":"","text":"1、执行rspec leap_year_spec.rb报错如下： 2、google搜索gem rspec找到两个github，一个是rspec/rspec（这个跟教材一样），一个是rspec/rspec-rails。用第二个，找到gem &#39;rspec-rails&#39;，在gemfile文件中安装，然后bundle。 3、再测试rspec leap_year_spec.rb，搞定如下：","categories":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}],"tags":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/tags/bug/"}],"keywords":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}]},{"title":"bug-seed档测试 ActiveRecord--StatementInvalid in Devise--SessionsController#create","slug":"bug-seed档测试 ActiveRecord--StatementInvalid in Devise--SessionsController#create","date":"2017-11-04T21:30:00.000Z","updated":"2018-01-14T01:48:10.000Z","comments":true,"path":"posts/852d9f92/","link":"","permalink":"http://yoursite.com/posts/852d9f92/","excerpt":"","text":"jdstore4-3，做seed档后，测试报错ActiveRecord::StatementInvalid in Devise::SessionsController#createSQLite3::ReadOnlyException: attempt to write a readonly database: UPDATE “users” SET “current_sign_in_at” = ?, “last_sign_in_at” = ?, “sign_in_count” = ?, “updated_at” = ? WHERE “users”.”id” = ?def each loop do val = step break self if done? yield val end 原因seed档里u.is_admin = true错写成u.is_admin 修改后，rake db:drop、 rake db:migrate、 rake db:seed","categories":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}],"tags":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/tags/bug/"}],"keywords":[{"name":"bug","slug":"bug","permalink":"http://yoursite.com/categories/bug/"}]}]}